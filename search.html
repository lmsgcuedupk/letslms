<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Serch</title><style>body {font-family: Arial,sans-serif;background-color: #000;color: #99f;margin: 0;padding: 0;min-height: 100vh;display: flex;flex-direction: column;}h1 {text-align: center;color: #99f;padding: 20px 0;background-color: #000;margin: 0;font-size: 2rem;position: sticky;top: 0;z-index: 100;}.container {width: 95%;margin: 0 auto;padding: 0;overflow-x: auto;flex: 1;}#searchBox {width: 95%;padding: 12px;font-size: 1.2rem;border: 2px solid #99f;border-radius: 5px;margin: 10px auto;display: block;box-sizing: border-box;background-color: #000;color: #fff;transition: all 0.3s ease;}#searchBox:focus {outline: none;border-color: #4CAF50;box-shadow: 0 0 8px rgba(76, 175, 80, 0.6);}.table-container {width: 100%;max-width: 100%;overflow-x: auto;margin: 10px 0;padding: 0;background: linear-gradient(135deg,#0a0f2d,#111733);box-shadow: 0 4px 10px rgba(0,0,0,.3);border-radius: 8px;}table {width: 100%;border-collapse: collapse;background: linear-gradient(135deg,#0a0f2d,#111733);position: relative;}@media (orientation:landscape) {table {font-size: 16px;}}@media (orientation:portrait) {table {font-size: clamp(4px, 2vw, 14px);}}td,th {padding: 8px;text-align: left;color: #eef;border: none;max-width: 200px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;}th {background: linear-gradient(135deg,#223566,#1b2c4a);cursor: pointer;position: sticky;top: 0;z-index: 10;font-weight: 600;}th.sort-asc::after {content: "↑";position: absolute;right: 8px;color: #4CAF50;}th.sort-desc::after {content: "↓";position: absolute;right: 8px;color: #4CAF50;}tr {transition: background-color 0.2s ease;}tr:nth-child(2n) {background-color: rgba(255,255,255,.03);}tr:hover {background-color: #446c99aa;}.highlight {color: #ff0;font-weight: bold;background-color: rgba(255, 255, 0, 0.1);padding: 2px;border-radius: 3px;}#resultsCount {text-align: center;padding: 10px;color: #4CAF50;font-size: 0.9rem;opacity: 0.8;}.suggestion-box {position: absolute;background: #111733;border: 1px solid #4CAF50;max-height: 200px;overflow-y: auto;z-index: 1000;width: 95%;left: 2.5%;top: 100%;margin-top: 2px;border-radius: 4px;box-shadow: 0 2px 6px rgba(0,0,0,0.3);}.suggestion-item {padding: 10px;cursor: pointer;color: #99f;transition: background-color 0.2s ease;}.suggestion-close {padding: 10px;color: #ff5555;cursor: pointer;text-align: center;border-top: 1px solid #4CAF50;}.suggestion-close:hover {background-color: #223566;}.suggestion-item:hover {background-color: #223566;}.no-results {text-align: center;padding: 20px;color: #ff5555;font-style: italic;}@keyframes fadeIn {from {opacity: 0;}to {opacity: 1;}}.fade-in {animation: fadeIn 0.3s ease;}</style></head><body><div style="position:relative"><input id=searchBox placeholder="Search..."><div id=suggestions class=suggestion-box></div></div><div id=resultsCount></div><div class=table-container><table id=resultsTable><thead><tr><th>Roll No</th><th>Name</th><th>Father Name</th><th>Class</th><th>Subjects</th><th>Major</th><th>T_NO</th><th>SE_ID</th><th>C_CODE</th><th>MAJ_ID</th></tr></thead><tbody></tbody></table></div><script src="s.js"></script><a href="#" id="gurl"></a><script>let currentSort = {column: null,direction: 'asc'};let currentResults = [];let debounceTimer;let suggestionsEnabled = true;function parseCSV(t) {let e = t.trim().split("**").map(t=>t.trim()),n = e.shift().split(","); return e.map(t=> {let e = t.split(","); return Object.fromEntries(n.map((t, n)=>[t, e[n]?.replaceAll('"', "") || ""]))})}let firstYear = parseCSV(csv1), firstYearDetails = parseCSV(csv2), allStudents = {};function mergeData() {firstYear.forEach(t=> {allStudents[t.ROLL] = {...t, f_nm: "", SUB_COMB: ""}}),firstYearDetails.forEach(t=> {allStudents[t.ROLL]?Object.assign(allStudents[t.ROLL], t): allStudents[t.ROLL] = {...t, NAME: "", CLASS_NM: ""}})}function levenshtein(t, e) {if (!t.length)return e.length; if (!e.length)return t.length; let n = Array(e.length+1).fill(0).map((t, e)=>e),l = Array(e.length+1); for (let r = 1; r <= t.length; r++) {l[0] = r; for (let a = 1; a <= e.length; a++) {let s = t[r-1] === e[a-1]?0: 1; l[a] = Math.min(l[a-1]+1, n[a]+1, n[a-1]+s)}[n,l] = [l,n]}return n[e.length]}function getMatchScore(t, e) {let n = (t.NAME+" "+t.f_nm+" "+t.M_ID+" "+t.CLASS_NM+" "+t.SUB_COMB.replaceAll("/", " ")+" "+t.ROLL.slice(0, 4)).toLowerCase(),l = [...new Set(n.split(" "))],r = 0; for (let a of e)for (let s of l)if (a === s && a.length > 1)r += 10; else {let o = levenshtein(a, s); o < 2 && (r += a.length > 1 ? (5-o)*2:0)}return {nameScore: r}}let lquery = "";function searchStudent(greer="bruh") {clearTimeout(debounceTimer);debounceTimer = setTimeout(async () => {let t = document.getElementById("searchBox").value.toLowerCase().trim();if (!t || t === lquery) return;localStorage.setItem("lastQuery", t);let e = t.split(" "),n = [];if (greer != "sugg" && suggestionsEnabled) {showSuggestions(t);} else {hideSuggestions();}Object.values(allStudents).forEach(l=> {let {ROLL: r} = l, {nameScore: a} = getMatchScore(l, e), s = r.startsWith(t)?50: 0; (a > 0 || s > 0) && n.push({student: l, totalScore: a+s})});n.sort((t, e)=>e.totalScore-t.totalScore);currentResults = n.map(t=>t.student);displayResults(currentResults);lquery = t;},300);}function highlightText(text, query) {if (!query) return text;const queries = query.split(' ');queries.sort((a, b) => b.length - a.length);let highlightedText = text;queries.forEach(q => {if (q.length > 0) {const regex = new RegExp(`(${q.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');highlightedText = highlightedText.replace(regex, '<span class="highlight">$1</span>');}});return highlightedText;}function showSuggestions(query) {if (!query || !suggestionsEnabled) {hideSuggestions();return;}const cleanQuery = query.toLowerCase().trim();const queryWords = cleanQuery.split(/\s+/).filter(Boolean);const suggestions = Object.values(allStudents).filter(student => {const nameCombination = `${student.NAME || ''} ${student.f_nm || ''}`.toLowerCase();const rollNumber = student.ROLL.toLowerCase();return queryWords.every(word =>(nameCombination.includes(word) || rollNumber.includes(word))&&word.length > 1);}).slice(0, 5);const suggestionsBox = document.getElementById('suggestions');suggestionsBox.innerHTML = `${suggestions.map(student => {const displayName = [student.NAME, student.f_nm].filter(Boolean).join(' • ');return `<div class="suggestion-item" data-roll="${student.ROLL}">${highlightText(displayName, query)} (${highlightText(student.ROLL, query)})</div>`;}).join('')}${suggestions.length ? `<div class="suggestion-close" onclick="hideSuggestions()">&times; Close</div>`: ''}`;suggestionsBox.style.display = suggestions.length ? 'block': 'none';}function hideSuggestions() {const suggestionsBox = document.getElementById('suggestions');suggestionsBox.style.display = 'none';suggestionsBox.innerHTML = '';}function displayResults(t) {let e = document.querySelector("#resultsTable tbody");e.innerHTML = "";document.getElementById('resultsCount').textContent = `${t.length} results found`;if (0 === t.length) {e.innerHTML = "<tr class='no-results'><td colspan='10'>No matching records found</td></tr>";return;}t = t.slice(0, 12);t.forEach(student=> {let n = document.createElement("tr");n.classList.add('fade-in');let rowData = [student.ROLL,student.NAME || "Unknown",student.f_nm || "Unknown",student.CLASS_NM || "Unknown",(student.SUB_COMB || "").replaceAll(",", "/"),student.M_ID || "Unknown",student.T_NO || "Unknown",student.SE_ID || "Unknown",student.C_CODE || "Unknown",student.MAJ_ID || "Unknown"];n.innerHTML = rowData.map(data =>`<td>${highlightText(data, document.getElementById("searchBox").value)}</td>`).join('');e.appendChild(n);});}function sortResults(columnIndex) {const columnKeys = ['ROLL','NAME','f_nm','CLASS_NM','SUB_COMB','M_ID','T_NO','SE_ID','C_CODE','MAJ_ID'];const key = columnKeys[columnIndex];currentSort.direction = currentSort.column === columnIndex && currentSort.direction === 'asc' ? 'desc': 'asc';currentSort.column = columnIndex;currentResults.sort((a, b) => {const valA = a[key] || '';const valB = b[key] || '';return currentSort.direction === 'asc' ? valA.localeCompare(valB): valB.localeCompare(valA);});document.querySelectorAll('th').forEach(th => th.classList.remove('sort-asc', 'sort-desc'));document.querySelectorAll('th')[columnIndex].classList.add(`sort-${currentSort.direction}`);displayResults(currentResults);}document.getElementById('searchBox').addEventListener('input', searchStudent);document.querySelectorAll('th').forEach((th, index) => {th.addEventListener('click', () => sortResults(index));});document.getElementById('suggestions').addEventListener('click', (e) => {if (e.target.classList.contains('suggestion-item')) {document.getElementById('searchBox').value = e.target.dataset.roll;hideSuggestions();searchStudent("sugg");}});document.addEventListener('keydown', (e) => {if (e.key === 'Enter') {document.getElementById("gurl").click();hideSuggestions(); searchStudent();}});setTimeout(searchStudent, 20);mergeData();document.addEventListener("DOMContentLoaded", () => {document.getElementById("searchBox").value = localStorage.getItem("lastQuery") || "";});document.addEventListener("touchstart",(e)=>{if(e.touches[0].target.classList!="suggestion-item"&&e.touches[0].target.id!="searchBox")hideSuggestions();});</script></body></html>